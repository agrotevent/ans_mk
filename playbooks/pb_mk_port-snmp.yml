---
- name: "SNMP"
  hosts: all
  vars:
  - ansible_connection: ansible.netcommon.network_cli
  - ansible_network_os: community.network.routeros
  - ANSIBLE_REMOTE_TMP: /tmp

#Variablen f√ºr die SNMP Einstellungen Community/Location
    snmpcommunity: setnetz
    snmplocation: Lager

  gather_facts: false
  environment:
    remote_tmp:  /tmp/.ansible/tmp



  tasks:

  - name: Set community
    community.routeros.command:
      commands: /snmp/community/add name={{snmpcommunity}} read-access=yes write-access=no

  - name: Set Port Description leeren
    community.routeros.command:
      commands: /snmp/set enabled=yes location={{snmplocation}} trap-community={{snmpcommunity}}

  #- name: Check if an update is needed
  #  community.routeros.command:
  #    commands:
  #      - "[:put ([/system package update check-for-updates])]"
  #  register: output
#
#    - name: print variable
#      debug:
#        msg: "{{ output }}"
#
#    - name: Run upgrade if new version is available
#      community.routeros.command:
#        commands:
#           - /system package update install
#      when: output.stdout is search('available')


#   - name: Performing backup of Mikrotik to local storage
#     raw: /system backup save name {{inventory_hostname}}
...
